<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Family Tree — Mobile First</title>
	<style>
		:root{
			--card-bg:#fff;
			--accent:#2c3e50;
			--primary:#3498db;
			--muted:#7f8c8d;
			--you-start:#fff3e0;
			--you-end:#ffe0b2;
			--card-radius:12px;
		}
		html,body{height:100%;}
		body{
			margin:0;
			font-family: Georgia, 'Times New Roman', serif;
			background: linear-gradient(180deg,#f6f8fb 0,#e9eef6 100%);
			color:var(--accent);
			-webkit-font-smoothing:antialiased;
			-moz-osx-font-smoothing:grayscale;
		}

		.wrap{max-width:1100px;margin:0 auto;padding:18px;}
		header{ text-align:center;margin:8px 0 18px; }
		header h1{font-size:2rem;margin:0;color:var(--accent);}

		/* The tree area */
		.tree-container{
			background:#fff;border-radius:16px;padding:18px 12px 34px;box-shadow:0 8px 32px rgba(20,30,40,0.08);
		}

		/* Mobile-first: stacked list centered with a central vertical connector */
		.family-tree{position:relative;padding:24px 8px;transition:transform 250ms ease;transform-origin:top center}
		.family-tree::before{
			content:'';position:absolute;left:50%;top:60px;bottom:40px;width:4px;background:linear-gradient(#cfe6ff,#dfe8ff);transform:translateX(-50%);border-radius:4px;z-index:0;
		}

		.generation{display:block;margin:0 auto;}

			.person{
				position:relative;z-index:1;display:block;margin:18px auto;padding:16px 18px;background:linear-gradient(180deg,#ffffff,#fbfdff);border-radius:var(--card-radius);min-width:120px;max-width:200px;box-shadow:0 10px 30px rgba(10,20,40,0.06);border:3px solid rgba(52,152,219,0.15);
			text-align:center;cursor:pointer;transition:transform 160ms ease,box-shadow 160ms ease,border-color 160ms ease;
		}
		.person:hover{transform:translateY(-4px);box-shadow:0 18px 40px rgba(10,20,40,0.08);border-color:var(--primary);} 

		/* small vertical connector from previous node */
		.person::before{content:'';position:absolute;left:50%;top:-34px;transform:translateX(-50%);width:4px;height:34px;background:linear-gradient(#cfe6ff,#dfe8ff);border-radius:2px;z-index:-1;}
		/* hide first connectors for top-most generation members */
		.person.top::before{display:none}

		.person-name{font-size:1.1rem;font-weight:700;margin-bottom:6px;color:var(--accent)}
		.person-relation{font-size:0.9rem;color:var(--muted);font-style:italic}

		/* small badge for 'you' card */
		.you{background:linear-gradient(180deg,var(--you-start),var(--you-end));border-color:#fb8c00;color:#4e342e}

		/* muted container background */
		.tree-container{background:linear-gradient(180deg,#fbfdff,#f6f9fc);}

		/* Generation color accents (soft, readable) */
		.gen-1{background:linear-gradient(180deg,#fffaf6,#fff1e6);border-color:rgba(244,143,177,0.18)} /* warm pink */
		.gen-2{background:linear-gradient(180deg,#f6fdff,#eef9ff);border-color:rgba(52,152,219,0.14)} /* soft blue */
		.gen-3{background:linear-gradient(180deg,#f7fff6,#eefff0);border-color:rgba(46,204,113,0.12)} /* soft green */
		.gen-4{background:linear-gradient(180deg,#fff9fb,#fff0f6);border-color:rgba(155,89,182,0.10)} /* soft purple */

		/* ensure .you still stands out when combined with generation classes */
		.gen-4.you{background:linear-gradient(180deg,var(--you-start),var(--you-end));border-color:#fb8c00;color:#4e342e}

		/* Modal (centered) */
		.modal-backdrop{position:fixed;inset:0;background:rgba(12,18,30,0.35);display:none;align-items:center;justify-content:center;z-index:1200}
		.modal-backdrop.show{display:flex}
		.info-panel{width:92%;max-width:360px;background:#fff;border-radius:12px;padding:18px;box-shadow:0 24px 60px rgba(8,18,32,0.3);position:relative}
		.info-panel h3{margin:0 0 8px;font-size:1.1rem}
		.info-panel p{margin:6px 0;color:#4a5566}
		.close-btn{position:absolute;top:8px;right:10px;border:none;background:none;font-size:20px;color:#c0392b;cursor:pointer}

		/* Larger screens: show generations as horizontal rows */
			@media(min-width:768px){
				.family-tree{padding:36px 18px}
				.generation{display:flex;justify-content:center;gap:48px;align-items:flex-start}
				.person{margin:0;padding:20px 22px;min-width:140px;max-width:200px;text-align:center}
			/* hide central vertical bar on wide screens and show small connectors under each person */
				.family-tree::before{display:none}
				.person::before{position:absolute;left:50%;top:100%;height:26px;transform:translateX(-50%);width:4px}
				.person.top::before{display:block}
			}

			/* small utilities */
			.muted{color:var(--muted)}

			/* Top generation side-by-side on small screens */
			.top-generation{display:flex;gap:12px;justify-content:center;align-items:stretch}
			/* Make Valone and Clara match other .person sizes (max-width:200px) */
			.top-generation .person{flex:1 1 auto;max-width:200px;min-width:120px;width:100%}

			@media(max-width:340px){
				.top-generation .person{flex:0 0 48%;}
				.person-name{font-size:1rem}
				.person-relation{font-size:0.85rem}
			}
	</style>
</head>
<body>
	<div class="wrap">
		<header><h1>Family Tree</h1></header>

		<main class="tree-container" id="treeRoot">
			<div class="family-tree" id="familyTree">
				<!-- Top generation (Valone & Clara) -->
				<div class="generation top-generation">
					<div class="person top generation-1 gen-1" onclick="showInfo(this,'valone')">
						<div class="person-name">Valone Presley</div>
						<div class="person-relation muted">Great-Great-Great Uncle</div>
					</div>

					<div class="person top generation-1 gen-1" onclick="showInfo(this,'clara')">
						<div class="person-name">Clara Presley</div>
						<div class="person-relation muted">Great-Great-Great Aunt</div>
					</div>
				</div>

				<!-- George -->
				<div class="generation">
					<div class="person generation-2 gen-2" onclick="showInfo(this,'george')">
						<div class="person-name">George Webster</div>
						<div class="person-relation muted">Great-Great-Grandfather</div>
					</div>
				</div>

				<!-- Grandma -->
				<div class="generation">
					<div class="person generation-3 gen-3" onclick="showInfo(this,'grandma')">
						<div class="person-name">Grandma</div>
						<div class="person-relation muted">Great-Grandmother</div>
					</div>
				</div>

				<!-- Mom -->
				<div class="generation">
					<div class="person generation-4 gen-4" onclick="showInfo(this,'mom')">
						<div class="person-name">Mom</div>
						<div class="person-relation muted">Mother</div>
					</div>
				</div>

				<!-- Emily -->
				<div class="generation">
					<div class="person generation-4 you gen-4" onclick="showInfo(this,'emily')">
						<div class="person-name">Emily</div>
						<div class="person-relation muted">You</div>
					</div>
				</div>
			</div>
		</main>

		<!-- Modal -->
		<div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
			<div class="info-panel" id="infoPanel">
				<button class="close-btn" id="closeBtn" aria-label="Close">×</button>
				<div id="infoContent">
					<h3>Select a family member</h3>
					<p>Tap any card to see details.</p>
				</div>
			</div>
		</div>

		<footer style="text-align:center;margin:18px 0;color:#9aa4b2;font-size:0.9rem">Mobile-first family tree</footer>
	</div>

	<script>
		const familyData = {
			valone: { name: 'Valone Presley', relation: 'Great-Great-Great Uncle', description: "Uncle to George Webster. Married to Clara Presley.", generation: 'Older generation' },
			clara:  { name: 'Clara Presley', relation: 'Great-Great-Great Aunt', description: "Aunt to George Webster. Married to Valone Presley.", generation: 'Older generation' },
			george: { name: 'George Webster', relation: 'Great-Great-Grandfather', description: "Nephew of Valone and Clara Presley. Grandma's father.", generation: 'Born early 1900s' },
			grandma:{ name: 'Grandma', relation: 'Great-Grandmother', description: "Daughter of George Webster. Mother of Mom.", generation: 'Parent generation' },
			mom:    { name: 'Mom', relation: 'Mother', description: "Daughter of Grandma. Mother of Emily.", generation: 'Parent generation' },
			emily:  { name: 'Emily', relation: 'You', description: "Daughter of Mom. Current generation.", generation: 'Present day' }
		};

		const modalBackdrop = document.getElementById('modalBackdrop');
		const infoPanel = document.getElementById('infoPanel');
		const infoContent = document.getElementById('infoContent');
		const closeBtn = document.getElementById('closeBtn');

		function showInfo(el, id){
			// toggle active state
			document.querySelectorAll('.person').forEach(p => p.classList.remove('active'));
			el.classList.add('active');

			const person = familyData[id];
			infoContent.innerHTML = `<h3>${person.name}</h3>
					<p><strong>Relationship:</strong> ${person.relation}</p>
					<p><strong>Generation:</strong> ${person.generation}</p>
					<p>${person.description}</p>`;

			modalBackdrop.classList.add('show');
			modalBackdrop.setAttribute('aria-hidden','false');
			// focus the close button for keyboard users
			closeBtn.focus();
		}

		function hideInfo(){
			modalBackdrop.classList.remove('show');
			modalBackdrop.setAttribute('aria-hidden','true');
			document.querySelectorAll('.person').forEach(p => p.classList.remove('active'));
		}

		// close on backdrop click
		modalBackdrop.addEventListener('click', (e)=>{
			if(e.target === modalBackdrop) hideInfo();
		});

		closeBtn.addEventListener('click', hideInfo);

		// close on escape
		document.addEventListener('keydown', (e)=>{
			if(e.key === 'Escape') hideInfo();
		});

		// Ensure the whole chart fits in the viewport height (scale down if needed)
		function scaleTreeToViewport() {
			const tree = document.getElementById('familyTree');
			if(!tree) return;
			// natural height of the tree
			// remove any existing transform to measure
			tree.style.transform = '';
			const treeRect = tree.getBoundingClientRect();
			const treeHeight = treeRect.height;
			// compute available height: viewport minus header/footer and small padding
			const headerHeight = document.querySelector('header')?.getBoundingClientRect().height || 0;
			const footerHeight = document.querySelector('footer')?.getBoundingClientRect().height || 0;
			const available = window.innerHeight - headerHeight - footerHeight - 48; // 48px breathing room
			let scale = 1;
			if(treeHeight > available && treeHeight > 0) {
				scale = available / treeHeight;
			}
			// clamp scale to at most 1 and not less than 0.5 to preserve readability
			scale = Math.max(0.5, Math.min(1, scale));
			// apply as translateX(0) scale(scale) to keep centered horizontally
			tree.style.transform = `translateX(0) scale(${scale})`;
		}

		window.addEventListener('load', () => {
			scaleTreeToViewport();
		});

		window.addEventListener('resize', () => {
			scaleTreeToViewport();
		});
	</script>
</body>
</html>
<!DOCTYPE html>
